<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->

    <title>Site data upload help</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- Custom code starts here (Metadata) / Code personalisé commence ici (Métadonnées) -->
    <!-- Custom code ends here (Metadata) / Code personalisé termine ici (Métadonnées)-->

    <link rel="stylesheet" href="https://wet-boew.github.io/themes-dist/GCWeb/GCWeb/css/theme.min.css">
    <noscript>
        <link rel="stylesheet" href="https://wet-boew.github.io/themes-dist/GCWeb/wet-boew/css/noscript.min.css" />
    </noscript>

    <!-- Custom code starts here (Analytics) / Code personalisé commence ici (Analytiques) -->

    <!-- Provider configuration - each is evaluated independently -->
    <script src="https://wet-boew.github.io/themes-dist/GCWeb/wet-boew/js/deps/json-patch.min.js"></script>
    <script src="https://wet-boew.github.io/themes-dist/GCWeb/wet-boew/js/deps/jsonpointer.min.js"></script>
    <!-- jQuery (required by many plugins) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- Custom code ends here (Analytics) / Code personalisé termine ici (Analytiques) -->

</head>


<body vocab="http://schema.org/" resource="#wb-webpage" typeof="WebPage">

    <nav>
        <ul id="wb-tphp">
            <li class="wb-slc"><a class="wb-sl" href="#wb-cont">Skip to main content</a></li>
            <li class="wb-slc visible-sm visible-md visible-lg"><a class="wb-sl" href="#wb-info">Skip to About this
                    site</a></li>
        </ul>
    </nav>

    <header>
        <div id="wb-bnr" class="container">
            <div class="row">
                <section id="wb-lng" class="col-xs-3 col-sm-12 pull-right text-right">
                    <h2 class="wb-inv">Language selection</h2>
                    <ul class="list-inline mrgn-bttm-0">
                        <li><a lang="fr" hreflang="fr" href="header-docs-fr.html">
                                <span class="hidden-xs" translate="no">Français</span>
                                <abbr title="Français" translate="no"
                                    class="visible-xs h3 mrgn-tp-sm mrgn-bttm-0 text-uppercase">fr</abbr>
                            </a></li>
                    </ul>
                </section>

                <div class="brand col-xs-9 col-sm-5 col-md-4" property="publisher" typeof="GovernmentOrganization">
                    <a href="https://www.canada.ca/en.html" property="url">
                        <img src="https://wet-boew.github.io/themes-dist/GCWeb/GCWeb/assets/sig-blk-en.svg"
                            alt="Government of Canada" property="logo" /><span class="wb-inv"> / <span
                                lang="fr">Gouvernement du Canada</span></span>
                    </a>
                    <meta property="name" content="Government of Canada">
                    <meta property="areaServed" typeof="Country" content="Canada" />
                    <link property="logo"
                        href="https://wet-boew.github.io/themes-dist/GCWeb/GCWeb/assets/wmms-blk.svg" />
                </div>

                <section id="wb-srch"
                    class="col-lg-offset-4 col-md-offset-4 col-sm-offset-2 col-xs-12 col-sm-5 col-md-4">
                    <h2>Search</h2>
                    <form action="https://www.canada.ca/en/sr/srb.html" name="cse-search-box" role="search">
                        <div class="form-group wb-srch-qry">
                            <label for="wb-srch-q" class="wb-inv">Search Canada.ca</label>
                            <input id="wb-srch-q" list="wb-srch-q-ac" class="wb-srch-q form-control" name="q"
                                type="search" value="" size="34" maxlength="170" placeholder="Search Canada.ca" />
                            <datalist id="wb-srch-q-ac"></datalist>
                        </div>
                        <div class="form-group submit">
                            <button type="submit" id="wb-srch-sub" class="btn btn-primary btn-small"
                                name="wb-srch-sub"><span class="glyphicon-search glyphicon"></span><span
                                    class="wb-inv">Search</span></button>
                        </div>
                    </form>
                </section>

            </div>
        </div>
        <hr>
        <nav id="wb-bc" property="breadcrumb">
            <h2>You are here:</h2>
            <div class="container">
                <ol class="breadcrumb">
                    <li>
                        <a href="https://www.canada.ca/en.html">Canada.ca</a>
                    </li>
                    <li>
                        <a href="https://www.canada.ca/en/services/business.html">Business and industry</a>
                    </li>
                    <li>
                        <a href="https://www.canada.ca/en/services/business/permits.html">Permits, licences and
                            regulations</a>
                    </li>
                    <li>
                        <a
                            href="https://www.canada.ca/en/services/business/permits/federallyregulatedindustrysectors.html">Federally
                            regulated industry sectors</a>
                    </li>
                    <li>
                        <a
                            href="https://www.canada.ca/en/services/business/permits/federallyregulatedindustrysectors/broadcastingtelecommunicationsregulation.html">Broadcasting
                            and telecommunications regulation</a>
                    </li>
                    <li>
                        <a
                            href="https://ised-isde.canada.ca/site/spectrum-management-system/en/spectrum-management-system">Spectrum
                            Management System</a>
                    </li>
                    <li>
                        <a
                            href="https://ised-isde.canada.ca/site/spectrum-management-system/en/spectrum-management-system-data">Spectrum
                            Management System Data</a>
                    </li>
                </ol>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1 id="wb-cont"> Text format for spectrum licence site data upload</h1>
        <p> Find information about the format and validation rules for uploading spectrum licence site data in
            CSV format, including field descriptions, examples, and error conditions for compliance.</p>

        <div id="wb-auto-1_wrapper" class="dataTables_wrapper no-footer">
            <h2>Spectrum licence site data fields</h2>
            <!--<div class="top">
                <div id="wb-auto-1_filter" class="dataTables_filter">
                    <label for="wb-auto-1_search">Filter items
                        <input id="wb-auto-1_search" type="search" class="" aria-controls="wb-auto-1">
                    </label>
                </div>
            </div>-->
            <table class="wb-tables table wb-init wb-tables-inited dataTable no-footer" id="wb-auto-1">
                <thead>
                    <tr>
                        <th rowspan="1" colspan="1" style="width: 50px;">
                            Column letter
                        </th>
                        <!--<th class="sorting sorting_asc" rowspan="1" colspan="1" aria-sort="ascending"
                            style="width: 100px;">
                            <button type="button" aria-controls="wb-auto-1"
                                title="Rendering engine: activate for descending sort">Column letter<span
                                    class="sorting-cnt"><span class="sorting-icons"
                                        aria-hidden="true"></span></span></button>
                        </th>-->
                        <th rowspan="1" colspan="1" style="width: 600px;">
                            Name
                        </th>
                        <!--<th class="sorting" rowspan="1" colspan="1" style="width: 600px;"><button type="button"
                                aria-controls="wb-auto-1" title="Browser: activate for ascending sort">Name<span
                                    class="sorting-cnt"><span class="sorting-icons"
                                        aria-hidden="true"></span></span></button></th>-->
                    </tr>
                </thead>
                <tbody>
                    <!-- Auto-generate content for table in here -->
                </tbody>

            </table>
        </div>
    </div>

    <div class="clear"><br></div>

    <footer id="wb-info">
        <h2 class="wb-inv">About this site</h2>
        <div class="gc-contextual">
            <div class="container">
                <nav>
                    <h3>[Contextual footer header]</h3>
                    <ul class="list-col-xs-1 list-col-sm-2 list-col-md-3">
                        <li><a href="http://canada.ca/en">Contextual link 1</a></li>
                        <li><a href="http://canada.ca/en">Contextual link 2</a></li>
                        <li><a href="http://canada.ca/en">Contextual link 3</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="gc-main-footer">
            <div class="container">
                <nav>
                    <h3>Government of Canada</h3>
                    <ul class="list-col-xs-1 list-col-sm-2 list-col-md-3">
                        <li><a href="https://www.canada.ca/en/contact.html">All contacts</a></li>
                        <li><a href="https://www.canada.ca/en/government/dept.html">Departments and agencies</a></li>
                        <li><a href="https://www.canada.ca/en/government/system.html">About government</a></li>
                    </ul>
                    <h4><span class="wb-inv">Themes and topics</span></h4>
                    <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                        <li><a href="https://www.canada.ca/en/services/jobs.html">Jobs</a></li>
                        <li><a href="https://www.canada.ca/en/services/immigration-citizenship.html">Immigration and
                                citizenship</a></li>
                        <li><a href="https://travel.gc.ca/">Travel and tourism</a></li>
                        <li><a href="https://www.canada.ca/en/services/business.html">Business</a></li>
                        <li><a href="https://www.canada.ca/en/services/benefits.html">Benefits</a></li>
                        <li><a href="https://www.canada.ca/en/services/health.html">Health</a></li>
                        <li><a href="https://www.canada.ca/en/services/taxes.html">Taxes</a></li>
                        <li><a href="https://www.canada.ca/en/services/environment.html">Environment and natural
                                resources</a></li>
                        <li><a href="https://www.canada.ca/en/services/defence.html">National security and defence</a>
                        </li>
                        <li><a href="https://www.canada.ca/en/services/culture.html">Culture, history and sport</a></li>
                        <li><a href="https://www.canada.ca/en/services/policing.html">Policing, justice and
                                emergencies</a></li>
                        <li><a href="https://www.canada.ca/en/services/transport.html">Transport and infrastructure</a>
                        </li>
                        <li><a href="https://www.international.gc.ca/world-monde/index.aspx?lang=eng">Canada and the
                                world</a></li>
                        <li><a href="https://www.canada.ca/en/services/finance.html">Money and finances</a></li>
                        <li><a href="https://www.canada.ca/en/services/science.html">Science and innovation</a></li>
                        <li><a href="https://www.canada.ca/en/services/indigenous-peoples.html">Indigenous Peoples</a>
                        </li>
                        <li><a href="https://www.canada.ca/en/services/veterans-military.html">Veterans and military</a>
                        </li>
                        <li><a href="https://www.canada.ca/en/services/youth.html">Youth</a></li>
                        <li><a href="https://www.canada.ca/en/services/life-events.html">Manage life events</a></li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="gc-sub-footer">
            <div class="container d-flex align-items-center">
                <nav>
                    <h3 class="wb-inv">Government of Canada Corporate</h3>
                    <ul>
                        <li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
                        <li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
                        <li><a href="https://design.canada.ca/about">About Canada.ca</a></li>
                        <li><a href="https://www.canada.ca/en/transparency/terms.html">Terms and conditions</a></li>
                        <li><a href="https://www.canada.ca/en/transparency/privacy.html">Privacy</a></li>
                    </ul>
                </nav>
                <div class="wtrmrk align-self-end">
                    <img src="https://wet-boew.github.io/themes-dist/GCWeb/GCWeb/assets/wmms-blk.svg"
                        alt="Symbol of the Government of Canada" />
                </div>
            </div>
        </div>
    </footer>

    <!-- Start of search and filtering scripts for DataTables -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script>
        let dataTable = null;
        let allRows = [];

        // Escape HTML to prevent XSS
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Generate table row HTML from CSV row
        function createTableRow(row) {
            const colA = escapeHtml(row['Column'] || '');
            const colB = escapeHtml(row['Field Name'] || '');
            const colCRaw = row['Description'] || '';
            const colD = escapeHtml(row['Example(s)'] || row['Example'] || '');
            const colE = row['Validation'] || '';
            const colF = escapeHtml(row['Validation Error'] || '');

            // Process column C - split on "|" and create list format if multiple items
            let colCHTML = '';
            const colCItems = colCRaw
                .split('|')
                .map(s => s.trim())
                .filter(s => s.length > 0);

            if (colCItems.length > 1) {
                // First item as paragraph, rest as list
                colCHTML = '<p>' + escapeHtml(colCItems[0]) + '</p>';
                colCHTML += '<ul>';
                for (let i = 1; i < colCItems.length; i++) {
                    colCHTML += '<li>' + escapeHtml(colCItems[i]) + '</li>';
                }
                colCHTML += '</ul>';
            } else {
                colCHTML = '<p>' + escapeHtml(colCRaw) + '</p>';
            }

            // Split validation rules on "." and filter empty items
            const validationRules = colE
                .split('.')
                .map(s => s.trim())
                .filter(s => s.length > 0);

            // Build validation list items
            let validationListHTML = '';
            validationRules.forEach(function (rule) {
                validationListHTML += '<li>' + escapeHtml(rule) + '</li>';
            });

            // Build and return row HTML
            return `<tr class="gradeA">
                        <td class="sorting_1">
                            <h5 style="text-align:left;">${colA}</h5>
                        </td>
                        <td>
                            <h5>${colB}</h5>
                            ${colCHTML}
                            <p><b>Example</b><br>
                            ${colD}</p>
                            <p><b>Validation rules</b>
                            <ul>
                            ${validationListHTML}
                            </ul>
                            </p>
                            <p><b>Validation errors</b></p>
                            <code>${colF}</code>
                        </td>
                    </tr>`;
        }

        // Populate table from CSV data
        function populateTable(csvData) {
            const tbody = $('#wb-auto-1 tbody');
            tbody.empty();
            allRows = [];

            // Filter and store valid rows
            csvData.forEach(function (row) {
                if (row['Column'] && row['Column'].trim()) {
                    allRows.push(row);
                }
            });

            // Create table rows in CSV order
            allRows.forEach(function (row) {
                tbody.append(createTableRow(row));
            });

            // Destroy existing DataTable if present
            if ($.fn.DataTable.isDataTable('#wb-auto-1')) {
                dataTable.destroy();
            }

            // Reinitialize DataTable
            dataTable = $('#wb-auto-1').DataTable({
                paging: false,
                info: false,
                autoWidth: false,
                searching: true,
                order: [],
                columnDefs: [{ orderable: false, targets: '_all' }],
                language: {
                    search: "Filter:"
                }
            });
        }

        // Auto-load CSV on page load
        $(document).ready(function () {
            // Fetch CSV file
            fetch('spectrum_licence_data.csv')
                .then(response => response.text())
                .then(csvText => {
                    Papa.parse(csvText, {
                        header: true,
                        complete: function (results) {
                            populateTable(results.data);
                        },
                        error: function (error) {
                            console.error('CSV parse error:', error);
                        }
                    });
                })
                .catch(error => {
                    console.error('Failed to load CSV file:', error);
                });

            // header search button
            $('#wb-srch-sub .wb-inv').text('Filter');
        });
    </script>
    <!-- End of search and filtering scripts for DataTables -->

</body>
</body>